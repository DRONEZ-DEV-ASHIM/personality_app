<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Personality Analyzer</title>
</head>
<body>

<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 760px;
    margin: 40px auto;
    background: #0f172a;
    color: #e2e8f0;
  }
  h1 { margin-bottom: 10px; }
  textarea {
    width: 100%;
    height: 160px;
    padding: 12px;
    border-radius: 8px;
    background: #1e293b;
    color: white;
    border: 1px solid #334155;
    outline: none;
  }
  textarea:focus {
    border-color: #3b82f6;
  }
  .btn {
    background: #3b82f6;
    border: none;
    padding: 10px 14px;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 12px;
  }
  .loader {
    display:none;
    width: 18px;height: 18px;border:3px solid rgba(255,255,255,0.2);
    border-top-color:white;border-radius:50%;
    animation:spin 0.8s linear infinite;margin-left:10px;
  }
  @keyframes spin { to { transform: rotate(360deg);} }
</style>

<h1>Personality & Sentiment Analyzer</h1>

<form id="analyzeForm" action="/analyze" method="POST">
  <label>Enter your self-description / thoughts:</label><br>
  <textarea name="text" placeholder="Type something..."></textarea><br>
  <button class="btn" type="submit">Analyze</button>
  <span class="loader" id="loader"></span>
</form>


<script>
  const form = document.getElementById("analyzeForm");
  const loader = document.getElementById("loader");

  form.addEventListener("submit", async function(e){
    e.preventDefault();
    const fd = new FormData(form);
    const text = fd.get("text").trim();

    if (!text){
      alert("Enter some text first.");
      return;
    }

    loader.style.display = "inline-block";

    const res = await fetch("/analyze", {
      method:"POST",
      body: fd
    });

    const html = await res.text();
    document.open();
    document.write(html);
    document.close();
  });
</script>

</body>
</html>
